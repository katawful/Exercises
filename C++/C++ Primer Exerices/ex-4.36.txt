Rewrite i *= d so that it does integral multiplication:

i *= static_cast<int>(d)
